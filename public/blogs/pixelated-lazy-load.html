<script
  defer
  src="https://cdn.jsdelivr.net/npm/@alpinejs/intersect@3.x.x/dist/cdn.min.js"
></script>

<script
  defer
  src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
></script>

<div x-data class="flex flex-col gap-4 p-4">
  <template x-for="imageId in 5">
    <div
      x-data="{ isLoaded: false, imageSrc: 'https://images.unsplash.com/photo-1674673243921-9e6ab580431f?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop' }"
    >
      <img
        :src="isLoaded ? `${imageSrc}&w=1770&q=80` : `${imageSrc}&w=10&q=80`"
        :class="{ '[image-rendering:_auto]': isLoaded, '[image-rendering:_pixelated]': !isLoaded}"
        x-intersect.full="isLoaded = true"
        alt="Street"
        class="h-80 w-full rounded-md object-cover"
      />
    </div>
  </template>
</div>
